<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Imago Orbis</title>
    <link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/ol-ext.css">
    <link rel="stylesheet" href="css/imago.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="css/ol-geocoder.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />

  </head>
  <body onload="GetRecords('dataset');PonerIdioma('');CargarTematicas('inicial','es');CargarNodos(8);">
    <header class="w-100">
      <!-- Barra superior -->
      <nav class="navbar p-0 m-0 navbar-expand-0">
        <a id="abrir_menu_lat" class="nav-link p-2 m-0" href="#" onclick="mostrar_menu_lat();ocultar_menu_nodos();"><i class="fas fa-caret-right" style="vertical-align:middle;"></i><img class="img-fluid p-2 m-2" style="height:2em;width:auto;margin:0 !important;" src="img/layers4.png"></img></a>
        <a id="cerrar_menu_lat" class="nav-link p-2 m-0" href="#" onclick="ocultar_menu_lat()"><i class="fas fa-caret-left" style="vertical-align:middle;"></i><img class="img-fluid p-2 m-2" style="height:2em;width:auto;margin:0 !important;" src="img/layers4.png"></img></a>
        <a class="nav-link m-0 p-0 mx-2" href="#">
          <h1 id="txtVisualizador" class="p-1 m-0"></h1>
        </a>
        <a id="abrir_menu_nodos" class="nav-link p-2 m-0" href="#" onclick="mostrar_menu_nodos();ocultar_menu_lat();"><i class="fas fa-caret-down"></i></a>
        <a id="cerrar_menu_nodos" class="nav-link p-2 m-0" href="#" onclick="ocultar_menu_nodos()"><i class="fas fa-caret-up"></i></a>
        <a class="navbar-brand ml-auto m-0 p-0" href="#">
          <form class="form-inline">
    				<div class="btn-group mr-2 mt-4">
    					<button id="boton_es" type="button" class="btn btn_idioma m-0 p-0" onclick="PonerIdioma('es');CargarTematicas(ultimoNumMaxTematicas,'es')"><p class="m-0 p-0 px-1">ES</p></button>
    					<button id="boton_en" type="button" class="btn btn_idioma m-0 p-0" onclick="PonerIdioma('en');CargarTematicas(ultimoNumMaxTematicas,'en')"><p class="m-0 p-0 px-1">EN</p></button>
    				</div>
            <img src="img/imago2.png" alt="logo" style="height:3em;width:auto" class="img-fluid">
          </form>
        </a>
      </nav>
    </header>
    <main>
      <div id="map" class="map"></div>

      <div class="posicion_escala justify-content-left">
          <span id="escalaLineal"></span>
          <span id="posicionMouse"></span>
      </div>
       <div id="barraLocalizar" class="input-group m-0 p-0 buscador_lugares" >
           <input name="localizar" class="form-control" id="localizar" placeholder="Centrar mapa en..." onFocus="this.value=''">
           <div class="input-group-prepend">
             <div class="input-group-text" onclick="javascript:Localiza(CentraMapa)"><i class="fas fa-map-signs"></i></div>
           </div>

           <div id="tablaLugares"></div>
       </div>


    <!--  <div class="div_cambio_mapa_base" title="Cambia mapa de fondo">
        <div id="basemapbox" class="mapa_base base_osm" style="display:none;" onclick="javascript:CambioMapaBase('mapbox');"></div>
        <div id="baseVTusig" class="mapa_base base_vtusig" onclick="javascript:CambioMapaBase('VTusig');"></div>
      </div> -->
      <div id="mapaBaseVisible" class="div_activar_cambio_mapa_base card m-0 p-0 mapa_base_mapbox" onmouseover="javascript:AbrirMenuMapaBase();"></div>
      <div id="menuMapaBase" class="card-deck m-0 p-0 div_cambio_mapa_base" style="display:none;" title="Cambia mapa base">
        <div id="baseMapbox" class="card m-0 p-0 mapa_base_i mapa_base_mapbox" onclick="javascript:CambioMapaBase('mapbox');"></div>
        <div id="baseVTusig" class="card m-0 p-0 mapa_base_i mapa_base_VTusig" onclick="javascript:CambioMapaBase('VTusig');"></div>
        <div id="baseOSM" class="card m-0 p-0 mapa_base_i mapa_base_osm" onclick="javascript:CambioMapaBase('osm');"></div>
        <div id="baseStamen" class="card m-0 p-0 mapa_base_i mapa_base_stamen" onclick="javascript:CambioMapaBase('stamen');"></div>
     </div>





       <div id="textoGetFeatureInfo"></div>

      <div id="menuNodos" class="container-fluid p-0 m-0">
        <div class="row_menu_nodos row justify-content-center">
          <div class="col-auto">
            <div id="espNodos" class="card-deck">
            </div>
          </div>
        </div>
      </div>


      <div id="sidebar" class="sidebar container-fluid m-0 p-0">
        <div id="espMenuGestionCapas" class="row m-0 p-0" style="width:100%;position:absolute;top:1%;max-height:54%;overflow:auto;">
            <!-- Se carga contenido con la función GestionCapas() -->
        </div>
        <div id="espMenuTematicas" class="row m-0 p-0" style="position:absolute;top:1%">
            <!-- Se carga contenido con la función CargarTematicas() -->
        </div>
        <div id="barraMenuBusqueda" class="input-group m-1 p-0" style="position:absolute;bottom:6.5em;text-align:center;">
          <input type="text" class="form-control" id="abrirBusqueda" placeholder="Añadir datos" onclick="VariarPosiciones('busqueda_abierta')">
          <div class="input-group-prepend">
            <div class="input-group-text mr-3"><i class="fas fa-search"></i></div>
          </div>
        </div>
        <div id="espMenuBusqueda" class="row m-0 mt-3 p-0" style="width:100%;position:absolute;text-align:center;display:none">
          <ul class="nav nav-tabs w-100 m-1" id="tabMenuBusqueda" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="tabCatalogo" data-toggle="tab" role="tab" href="#espCatalogo" aria-selected="true">
                <h5 id="txtTabCatalogo" class="p-0 m-0"></h5>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="tabFichero" data-toggle="tab" role="tab" href="#espFichero" aria-selected="false">
                <h5 id="txtTabFichero" class="p-0 m-0"></h5>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="tabURL" data-toggle="tab" role="tab" href="#espURL" aria-selected="false">
                <h5 id="txtTabURLServicio" class="p-0 m-0"></h5>
              </a>
            </li>
          </ul>
          <div class="tab-content w-100 m-1" id="espCarga">
            <div class="tab-pane fade show active" id="espCatalogo" role="tabpanel" aria-labelledby="tabCatalogo">
              <div class="form-group">
                <select class="form-control" id="selCatalogo" style="width:100em;">
                  <option value=""></option>
                </select>
                <div class="" id="espBusquedaCatalogo" style="width:98%;height:13em;overflow-y:auto;">

                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="espFichero" role="tabpanel" aria-labelledby="tabFichero">...</div>
            <div class="tab-pane fade" id="espURL" role="tabpanel" aria-labelledby="tabURL">
              <div class="input-group m-0 p-0" style="width:96%;">
                  <input name="cargar ruta" class="form-control" id="cargarURL" placeholder="Dirección url del servicio" onFocus="this.value='';javascript:vaciarListaCapas()">
                  <div class="input-group-prepend">
                    <div class="input-group-text" onclick="javascript:cargarURLServicio(cargarURL.value)"><i class="fas fa-plus"></i></div>
                  </div>
              </div>
              <div class="" id="espBusquedaURLExterna" style="width:98%;height:13em;overflow-y:auto;">
                <p class="m-2 p-0" id="txtEjemploServicio" style="font-size:0.8em;"></p>
              </div>




            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="w-100">
      <div class="container-fluid">
        <div class="row barra_pie justify-content-between">
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          </div>
          <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
            <div class="row barra_iconos_pie justify-content-end">
              <div class="col-auto m-0 p-0">
                <button class="btn btn-outline-light boton_transparente ml-auto m-0 mx-1 p-0" onclick="">
                  <i class="fas fa-share-alt-square"></i>
                </button>
                <!--<button class="btn btn-outline-light boton_transparente ml-auto m-0 mx-1 p-0" onclick="window.open('https://twitter.com/usig_cchs_csic?lang=es')" target="_blank">
                  <i class="fab fa-twitter-square"></i>
                </button>-->
                <button class="btn btn-outline-light boton_transparente ml-auto m-0 mx-1 p-0" onclick="window.open('https://github.com/alejandrobarriuso/visualizador_HD')" target="_blank">
                  <i class="fab fa-github-square"></i>
                </button>
                <button class="btn btn-outline-light boton_transparente ml-auto m-0 mx-1 mr-3 p-0" onclick="">
                  <i class="far fa-closed-captioning"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- CÓDIGO FUENTE -->
    <script type="text/javascript" src="js/fuente/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/fuente/popper.js"></script>
    <script type="text/javascript" src="js/fuente/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://openlayers.org/en/v4.6.5/build/ol.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>

    <!-- JS FUNCIONAMIENTO PETICIONES AL CATÁLOGO -->
    <script type="text/javascript" src="js/fuente/catalogo/jsonix/jsonix.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/OWS_1_0_0.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/DC_1_1.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/DCT.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/w3c-schemas/lib/XLink_1_0.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/CSW_2_0_2.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/Filter_1_1_0.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/GML_3_1_1.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/SMIL_2_0_Language.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/SMIL_2_0.js"></script>
    <!-- ISO Profile -->
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/GML_3_2_1.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/GML_3_2_0.js"></script>
    <!-- NO NECESARIAS
	<script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GCO_20060504.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GMD_20060504.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GTS_20060504.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GSS_20060504.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GSR_20060504.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GMX_20060504.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_SRV_20060504.js"></script>
	-->
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GCO_20070417.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GMD_20070417.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GTS_20070417.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GSS_20070417.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GSR_20070417.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_GMX_20070417.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/ogc-schemas/lib/ISO19139_2_GMI_1_0.js"></script>
    <!-- ISO Profile -->
    <script type="text/javascript" src="js/fuente/catalogo/ows.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/csw.js"></script>
    <script type="text/javascript" src="js/fuente/catalogo/filter.js"></script>
	  <script type="text/javascript" src="js/fuente/catalogo/xmltojson.js"></script>

    <!-- JS FUNCIONAMIENTO MAPA -->
    <script type="text/javascript" src="js/arrayTematicas.js"></script>
    <script type="text/javascript" src="js/estiloVT.js"></script>
    <script type="text/javascript" src="js/map.js"></script>
    <script type="text/javascript" src="js/ponerIdioma.js"></script>

    <script type="text/javascript" src="js/wms/anadirWMS.js"></script>

    <script type="text/javascript" src="js/menuLateral/busquedaEnCatalogo.js"></script>
    <script type="text/javascript" src="js/menuLateral/cargaURLExterna.js"></script>
    <script type="text/javascript" src="js/menuLateral/menuTematicas.js"></script>
    <script type="text/javascript" src="js/menuLateral/menuGestionCapas.js"></script>
    <script type="text/javascript" src="js/menuLateral/variarPosiciones.js"></script>
    <script type="text/javascript" src="js/menuLateral/cargarCapa.js"></script>

    <script type="text/javascript" src="js/menuSuperior/arrayNodos.js"></script>
    <script type="text/javascript" src="js/menuSuperior/menuNodos.js"></script>
    <!-- JS FUNCIONAMIENTO PANEL SUPERIOR Y PANEL LATERAL IZQUIERDO -->
    <script>
      function mostrar_menu_lat() {
          //OJO! Sólo se debe poner: 21.2em o 10.6 em. Si no, el ajuste de los cuadros de temáticas no será correcto.
          document.getElementById("sidebar").style.width = "21.2em";
          document.getElementById("abrir_menu_lat").style.display = "none";
          document.getElementById("cerrar_menu_lat").style.display = "inline";
      }

      function ocultar_menu_lat() {
          document.getElementById("sidebar").style.width = "0";
          document.getElementById("abrir_menu_lat").style.display = "inline";
          document.getElementById("cerrar_menu_lat").style.display = "none";
      }
      function mostrar_menu_nodos() {
          document.getElementById("menuNodos").style.height = "9em";
          document.getElementById("abrir_menu_nodos").style.display = "none";
          document.getElementById("cerrar_menu_nodos").style.display = "inline";
      }

      function ocultar_menu_nodos() {
          document.getElementById("menuNodos").style.height = "0";
          document.getElementById("abrir_menu_nodos").style.display = "inline";
          document.getElementById("cerrar_menu_nodos").style.display = "none";
      }
      </script>
  </body>
</html>
